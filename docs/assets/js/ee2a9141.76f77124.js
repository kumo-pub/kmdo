"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2133],{1017:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>i,contentTitle:()=>d,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"tutorial/base/docker/ubuntu_install","title":"Docker Engine \u5b89\u88c5\u6587\u6863\uff08Ubuntu\uff09","description":"\u9002\u7528\uff1aUbuntu 20.04 / 22.04 / 24.04","source":"@site/docs/tutorial/base/docker/ubuntu_install.mdx","sourceDirName":"tutorial/base/docker","slug":"/tutorial/base/docker/ubuntu_install","permalink":"/docs/tutorial/base/docker/ubuntu_install","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Docker Engine \u5b89\u88c5\u6587\u6863\uff08CentOS / Rocky / AlmaLinux\uff09","permalink":"/docs/tutorial/base/docker/centos_install"},"next":{"title":"Kmpkg Section","permalink":"/docs/tutorial/kmpkg/"}}');var s=o(4848),c=o(8453);const t={},d="Docker Engine \u5b89\u88c5\u6587\u6863\uff08Ubuntu\uff09",i={},a=[{value:"1. \u79fb\u9664\u65e7\u7248\u672c\uff08\u53ef\u9009\uff09",id:"1-\u79fb\u9664\u65e7\u7248\u672c\u53ef\u9009",level:2},{value:"2. \u5b89\u88c5\u4f9d\u8d56",id:"2-\u5b89\u88c5\u4f9d\u8d56",level:2},{value:"3. \u6dfb\u52a0 Docker \u5b98\u65b9 GPG Key",id:"3-\u6dfb\u52a0-docker-\u5b98\u65b9-gpg-key",level:2},{value:"4. \u6dfb\u52a0\u5b98\u65b9\u8f6f\u4ef6\u6e90",id:"4-\u6dfb\u52a0\u5b98\u65b9\u8f6f\u4ef6\u6e90",level:2},{value:"5. \u5b89\u88c5 Docker Engine",id:"5-\u5b89\u88c5-docker-engine",level:2},{value:"6. \u5c06\u5f53\u524d\u7528\u6237\u52a0\u5165 docker \u7ec4\uff08\u63a8\u8350\uff09",id:"6-\u5c06\u5f53\u524d\u7528\u6237\u52a0\u5165-docker-\u7ec4\u63a8\u8350",level:2},{value:"7. \u9a8c\u8bc1\u5b89\u88c5",id:"7-\u9a8c\u8bc1\u5b89\u88c5",level:2},{value:"\u5b8c\u6574\u811a\u672c",id:"\u5b8c\u6574\u811a\u672c",level:2}];function l(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"docker-engine-\u5b89\u88c5\u6587\u6863ubuntu",children:"Docker Engine \u5b89\u88c5\u6587\u6863\uff08Ubuntu\uff09"})}),"\n",(0,s.jsx)(n.p,{children:"\u9002\u7528\uff1aUbuntu 20.04 / 22.04 / 24.04\n\u8981\u6c42\uff1a\u666e\u901a\u7528\u6237 + sudo \u6743\u9650"}),"\n",(0,s.jsx)(n.h2,{id:"1-\u79fb\u9664\u65e7\u7248\u672c\u53ef\u9009",children:"1. \u79fb\u9664\u65e7\u7248\u672c\uff08\u53ef\u9009\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt-get remove -y docker docker-engine docker.io containerd runc || true\n"})}),"\n",(0,s.jsx)(n.h2,{id:"2-\u5b89\u88c5\u4f9d\u8d56",children:"2. \u5b89\u88c5\u4f9d\u8d56"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt-get update\nsudo apt-get install -y ca-certificates curl gnupg\n"})}),"\n",(0,s.jsx)(n.h2,{id:"3-\u6dfb\u52a0-docker-\u5b98\u65b9-gpg-key",children:"3. \u6dfb\u52a0 Docker \u5b98\u65b9 GPG Key"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo install -m 0755 -d /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg \\\n    | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\nsudo chmod a+r /etc/apt/keyrings/docker.gpg\n"})}),"\n",(0,s.jsx)(n.h2,{id:"4-\u6dfb\u52a0\u5b98\u65b9\u8f6f\u4ef6\u6e90",children:"4. \u6dfb\u52a0\u5b98\u65b9\u8f6f\u4ef6\u6e90"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'echo \\\n  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] \\\n  https://download.docker.com/linux/ubuntu \\\n  $(lsb_release -cs) stable" \\\n  | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n'})}),"\n",(0,s.jsx)(n.h2,{id:"5-\u5b89\u88c5-docker-engine",children:"5. \u5b89\u88c5 Docker Engine"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt-get update\nsudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n"})}),"\n",(0,s.jsx)(n.h2,{id:"6-\u5c06\u5f53\u524d\u7528\u6237\u52a0\u5165-docker-\u7ec4\u63a8\u8350",children:"6. \u5c06\u5f53\u524d\u7528\u6237\u52a0\u5165 docker \u7ec4\uff08\u63a8\u8350\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo usermod -aG docker $USER\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u9700\u8981\u91cd\u65b0\u767b\u5f55\u6216\u91cd\u65b0\u6253\u5f00\u7ec8\u7aef\uff0cgroup \u6743\u9650\u624d\u4f1a\u751f\u6548\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"7-\u9a8c\u8bc1\u5b89\u88c5",children:"7. \u9a8c\u8bc1\u5b89\u88c5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker run hello-world\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u770b\u5230\u4ee5\u4e0b\u63d0\u793a\u5373\u5b89\u88c5\u6210\u529f\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Hello from Docker!\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5b8c\u6574\u811a\u672c",children:"\u5b8c\u6574\u811a\u672c"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\nset -euo pipefail\n\n# =====================================\n# Docker Install & Config Script for Ubuntu 20.04\n# Supports: sudo user usage & domestic mirror\n# =====================================\n\nUSER_NAME=${SUDO_USER:-$(whoami)}\n\necho "[INFO] Installing prerequisites..."\nsudo apt-get update\nsudo apt-get install -y \\\n    ca-certificates \\\n    curl \\\n    gnupg \\\n    lsb-release \\\n    software-properties-common\n\necho "[INFO] Adding Docker official GPG key..."\nsudo mkdir -p /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\n\necho "[INFO] Setting up Docker repository..."\necho \\\n  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" \\\n  | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n\necho "[INFO] Installing Docker..."\nsudo apt-get update\nsudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\necho "[INFO] Adding user \'$USER_NAME\' to docker group..."\nsudo usermod -aG docker "$USER_NAME"\n\necho "[INFO] Configuring Docker daemon for domestic mirror..."\nsudo tee /etc/docker/daemon.json > /dev/null <<\'EOF\'\n{\n  "dns": ["8.8.8.8", "1.1.1.1"],\n  "registry-mirrors": ["https://docker.m.daocloud.io"]\n}\nEOF\n\necho "[INFO] Restarting Docker daemon..."\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n\necho "[INFO] Done! Log out and log back in for group changes to take effect."\necho "You can test with: docker run --rm hello-world"\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker exec -it node2 bash\napt update && apt install -y openssh-server sudo\nmkdir /var/run/sshd\necho 'root:root' | chpasswd\nsed -i 's/#PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config\nservice ssh start\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker inspect -f '{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}' node1\n"})})]})}function u(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>t,x:()=>d});var r=o(6540);const s={},c=r.createContext(s);function t(e){const n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);