"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[8756],{1452:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"tutorial/pub/archive/archive","title":"Archives","description":"The binaries built will be archived together with the README and LICENSE files into a","source":"@site/docs/tutorial/pub/archive/archive.mdx","sourceDirName":"tutorial/pub/archive","slug":"/tutorial/pub/archive/","permalink":"/kmdo/docs/tutorial/pub/archive/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"WebHooks","permalink":"/kmdo/docs/tutorial/pub/announce/webhook"},"next":{"title":"Checksums","permalink":"/kmdo/docs/tutorial/pub/archive/checksum"}}');var r=t(4848),a=t(8453);const o={},s="Archives",l={},c=[];function d(e){const n={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"archives",children:"Archives"})}),"\n",(0,r.jsxs)(n.p,{children:["The binaries built will be archived together with the ",(0,r.jsx)(n.code,{children:"README"})," and ",(0,r.jsx)(n.code,{children:"LICENSE"})," files into a\n",(0,r.jsx)(n.code,{children:"tar.gz"})," file. In the ",(0,r.jsx)(n.code,{children:"archives"})," section you can customize the archive name,\nadditional files, and format."]}),"\n",(0,r.jsxs)(n.p,{children:["Here is a commented ",(0,r.jsx)(n.code,{children:"archives"})," section with all fields specified:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title=".kmdopkg.yaml"',children:'archives:\n  - #\n    # ID of this archive.\n    #\n    # Default: \'default\'.\n    id: my-archive\n\n    # IDs of the builds which should be archived in this archive.\n    #\n    # Default: empty (include all).\n    ids:\n      - default\n\n    # Archive formats.\n    #\n    # If format is `binary`, no archives are created and the binaries are instead\n    # uploaded directly.\n    #\n    # Valid options are:\n    # - `tar.gz`\n    # - `tgz`\n    # - `tar.xz`\n    # - `txz`\n    # - `tar.zst`\n    # - `tzst`\n    # - `tar`\n    # - `gz`\n    # - `zip`\n    # - `binary`\n    #\n    # Default: [\'tar.gz\'].\n    format: "zip" # Singular form, single format, deprecated.\n    formats: ["zip", "tar.gz"] # Plural form, multiple formats.\n\n    # This will create an archive without any binaries, only the files are there.\n    # The name template must not contain any references to `Os`, `Arch` and etc, since the archive will be meta.\n    #\n    # Templates: allowed.\n    meta: true\n\n    # Archive name.\n    #\n    # Default:\n    # - if format is `binary`:\n    #   - `{{ .Binary }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}{{ with .Arm }}v{{ . }}{{ end }}{{ with .Mips }}_{{ . }}{{ end }}{{ if not (eq .Amd64 "v1") }}{{ .Amd64 }}{{ end }}`\n    # - if format is anything else:\n    #   - `{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}{{ with .Arm }}v{{ . }}{{ end }}{{ with .Mips }}_{{ . }}{{ end }}{{ if not (eq .Amd64 "v1") }}{{ .Amd64 }}{{ end }}`\n    # Templates: allowed.\n    name_template: "{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}"\n\n    # Sets the given file info to all the binaries included from the `builds`.\n    #\n    # Default: copied from the source binary.\n    builds_info:\n      group: root\n      owner: root\n      mode: 0644\n      # format is `time.RFC3339Nano`\n      mtime: 2008-01-02T15:04:05Z\n\n    # Set this to true if you want all files in the archive to be in a single directory.\n    # If set to true and you extract the archive \'kmdo_Linux_arm64.tar.gz\',\n    # you\'ll get a directory \'kmdo_Linux_arm64\'.\n    # If set to false, all files are extracted separately.\n    # You can also set it to a custom directory name (templating is supported).\n    # Default: false.\n    wrap_in_directory: true\n\n    # If set to true, will strip the parent directories away from binary files.\n    #\n    # This might be useful if you have your binary be built with a sub-directory\n    # for some reason, but do no want that sub-directory inside the archive.\n    strip_binary_directory: true\n\n    # Can be used to change the archive formats for specific GOOSs.\n    # Most common use case is to archive as zip on Windows.\n    format_overrides:\n      - # Which GOOS to override the format for.\n        goos: windows\n\n        # The formats to use for the given GOOS.\n        #\n        # Valid options are:\n        # - `tar.gz`\n        # - `tgz`\n        # - `tar.xz`\n        # - `txz`\n        # - `tar.zst`\n        # - `tzst`\n        # - `tar`\n        # - `gz`\n        # - `zip`\n        # - `binary` # be extra-cautious with the file name template in this case!\n        # - `none`   # skips this archive\n        #\n        format: "zip" # Singular form, single format, deprecated.\n        formats: ["zip", "tar.gz"] # Plural form, multiple formats.\n\n    # Additional files/globs you want to add to the archive.\n    #\n    # Default: [ \'LICENSE*\', \'README*\', \'CHANGELOG\', \'license*\', \'readme*\', \'changelog\'].\n    # Templates: allowed.\n    files:\n      - LICENSE.txt\n      - README_{{.Os}}.md\n      - CHANGELOG.md\n      - docs/*\n      - design/*.png\n      - templates/**/*\n      # a more complete example, check the globbing deep dive below\n      - src: "*.md"\n        dst: docs\n\n        # Strip parent directories when adding files to the archive.\n        strip_parent: true\n\n        # File info.\n        # Not all fields are supported by all formats available formats.\n        #\n        # Default: copied from the source file.\n        info:\n          # Templates: allowed.\n          owner: root\n\n          # Templates: allowed.\n          group: root\n\n          # Must be in time.RFC3339Nano format.\n          #\n          # Templates: allowed.\n          mtime: "{{ .CommitDate }}"\n\n          # File mode.\n          mode: 0644\n\n    # Disables the binary count check.\n    allow_different_binary_count: true\n'})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>s});var i=t(6540);const r={},a=i.createContext(r);function o(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);