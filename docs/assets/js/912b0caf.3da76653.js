"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[4959],{6935:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"tutorial/pub/builds/verifiable_builds","title":"Verifiable Builds","description":"Kmdo has support for creating verifiable builds. A verifiable build","source":"@site/docs/tutorial/pub/builds/verifiable_builds.mdx","sourceDirName":"tutorial/pub/builds","slug":"/tutorial/pub/builds/verifiable_builds","permalink":"/docs/tutorial/pub/builds/verifiable_builds","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"UV","permalink":"/docs/tutorial/pub/builds/uv"},"next":{"title":"Zig","permalink":"/docs/tutorial/pub/builds/zig"}}');var t=i(4848),r=i(8453);const s={},a="Verifiable Builds",l={},d=[];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"verifiable-builds",children:"Verifiable Builds"})}),"\n",(0,t.jsxs)(n.p,{children:["Kmdo has support for creating verifiable builds. A ",(0,t.jsx)(n.a,{href:"https://research.swtch.com/vgo-repro",children:"verifiable build"}),"\nis one that records enough information to be precise about exactly how to repeat\nit. All dependencies are loaded via ",(0,t.jsx)(n.code,{children:"proxy.golang.org"}),", and verified against the\nchecksum database ",(0,t.jsx)(n.code,{children:"sum.golang.org"}),". A Kmdo-created verifiable build will\ninclude module information in the resulting binary, which can be printed using\n",(0,t.jsx)(n.code,{children:"go version -m mybinary"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Configuration options available are described below."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title=".kmdopkg.yaml"',children:"gomod:\n  # Proxy a module from proxy.golang.org, making the builds verifiable.\n  # This will only be effective if running against a tag. Snapshots will ignore\n  # this setting.\n  # Notice: for this to work your `build.main` must be a package, not a `.go` file.\n  proxy: true\n\n  # If proxy is true, use these environment variables when running `go mod`\n  # commands (namely, `go mod tidy`).\n  #\n  # Default: `os.Environ()` merged with what you set the root `env` section.\n  env:\n    - GOPROXY=https://proxy.golang.org,direct\n    - GOSUMDB=sum.golang.org\n    - GOPRIVATE=example.com/blah\n\n  # Sets the `-mod` flag value.\n  mod: mod\n\n  # Which Go binary to use.\n  #\n  # Default: `go`.\n  gobinary: go1.17\n\n  # Directory in which the go.mod file is.\n  #\n  # Default: ''.\n  dir: ./src\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["You can use ",(0,t.jsx)(n.code,{children:"debug.ReadBuildInfo()"})," to get the version/checksum/dependencies\nof the module."]})}),"\n",(0,t.jsxs)(n.admonition,{type:"warning",children:[(0,t.jsx)(n.p,{children:"VCS Info will not be embedded in the binary, as in practice it is not being\nbuilt from the source, but from the Go Mod Proxy."}),(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["If you have a ",(0,t.jsx)(n.code,{children:"go.work"})," file, make sure to run ",(0,t.jsx)(n.code,{children:"go work sync"}),", so the main\nmodule (",(0,t.jsx)(n.code,{children:"."}),") is the first line inside the ",(0,t.jsx)(n.code,{children:"use"})," block."]})})]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>a});var o=i(6540);const t={},r=o.createContext(t);function s(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);