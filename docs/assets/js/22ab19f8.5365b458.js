"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[3410],{3957:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"tutorial/pub/builds/deno","title":"Deno","description":"You can now build TypeScript binaries using deno compile and Kmdo!","source":"@site/docs/tutorial/pub/builds/deno.mdx","sourceDirName":"tutorial/pub/builds","slug":"/tutorial/pub/builds/deno","permalink":"/kmdo/docs/tutorial/pub/builds/deno","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Bun","permalink":"/kmdo/docs/tutorial/pub/builds/bun"},"next":{"title":"Go","permalink":"/kmdo/docs/tutorial/pub/builds/go"}}');var i=o(4848),a=o(8453);const s={},r="Deno",l={},d=[{value:"Environment setup",id:"environment-setup",level:3},{value:"Caveats",id:"caveats",level:2}];function c(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",sup:"sup",...(0,a.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"deno",children:"Deno"})}),"\n",(0,i.jsxs)(e.p,{children:["You can now build TypeScript binaries using ",(0,i.jsx)(e.code,{children:"deno compile"})," and Kmdo!"]}),"\n",(0,i.jsxs)(e.p,{children:["Simply set the ",(0,i.jsx)(e.code,{children:"builder"})," to ",(0,i.jsx)(e.code,{children:"deno"}),", for instance:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",metastring:'title=".kmdopkg.yaml"',children:'builds:\n  # You can have multiple builds defined as a yaml list\n  - #\n    # ID of the build.\n    #\n    # Default: Project directory name.\n    id: "my-build"\n\n    # Use deno.\n    builder: deno\n\n    # Binary name.\n    # Can be a path (e.g. `bin/app`) to wrap the binary in a directory.\n    #\n    # Default: Project directory name.\n    binary: program\n\n    # List of targets to be built, in Deno\'s format.\n    #\n    # See: https://docs.deno.com/runtime/reference/cli/compile/#supported-targets\n    # Default: [ "x86_64-pc-windows-msvc", "x86_64-apple-darwin", "aarch64-apple-darwin", "x86_64-unknown-linux-gnu", "aarch64-unknown-linux-gnu" ]\n    targets:\n      - x86_64-unknown-linux-gnu\n      - aarch64-unknown-linux-gnu\n      - x86_64-pc-windows-msvc\n      - x86_64-apple-darwin\n      - aarch64-apple-darwin\n\n    # Path to project\'s (sub)directory containing the code.\n    # This is the working directory for the `deno compile` command(s).\n    #\n    # Default: \'.\'.\n    dir: my-app\n\n    # Main entry point.\n    #\n    # Default: \'main.ts\'.\n    main: "file.ts"\n\n    # Set a specific deno binary to use when building.\n    # It is safe to ignore this option in most cases.\n    #\n    # Default: \'deno\'.\n    # Templates: allowed.\n    tool: "deno-canary"\n\n    # Sets the command to run to build.\n    #\n    # Default: \'compile\'.\n    command: not-build\n\n    # Custom flags.\n    #\n    # Templates: allowed.\n    # Default: [].\n    flags:\n      - --allow-read\n      - --allow-net\n\n    # Custom environment variables to be set during the builds.\n    # Invalid environment variables will be ignored.\n    #\n    # Default: os.Environ() ++ env config section.\n    # Templates: allowed.\n    env:\n      - FOO=bar\n\n    # Hooks can be used to customize the final binary,\n    # for example, to run generators.\n    #\n    # Templates: allowed.\n    hooks:\n      pre: ./foo.sh\n      post: ./script.sh {{ .Path }}\n\n    # If true, skip the build.\n    # Useful for library projects.\n    skip: false\n'})}),"\n",(0,i.jsxs)(e.p,{children:["Some options are not supported yet",(0,i.jsx)(e.sup,{children:(0,i.jsx)(e.a,{href:"#user-content-fn-fail",id:"user-content-fnref-fail","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),", but it should be usable for\nmost projects already!"]}),"\n",(0,i.jsx)(e.admonition,{type:"warning",children:(0,i.jsxs)(e.p,{children:["Learn more about ",(0,i.jsx)(e.a,{href:"/kmdo/docs/tutorial/pub/builds/hooks",children:"build hooks"}),"."]})}),"\n",(0,i.jsx)(e.h3,{id:"environment-setup",children:"Environment setup"}),"\n",(0,i.jsx)(e.p,{children:"Kmdo will not install Deno or any other dependencies on which your\nworkflow depends. Make sure to install them before running Kmdo."}),"\n",(0,i.jsx)(e.h2,{id:"caveats",children:"Caveats"}),"\n",(0,i.jsxs)(e.p,{children:["Kmdo will translate Deno's Os/Arch pair into a GOOS/GOARCH pair, so\ntemplates should work the same as before.\nThe original target name is available in templates as ",(0,i.jsx)(e.code,{children:".Target"}),", and so is the\nthe ABI and Vendor as ",(0,i.jsx)(e.code,{children:".Abi"})," and ",(0,i.jsx)(e.code,{children:".Vendor"}),", respectively."]}),"\n","\n",(0,i.jsxs)(e.section,{"data-footnotes":!0,className:"footnotes",children:[(0,i.jsx)(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{id:"user-content-fn-fail",children:["\n",(0,i.jsxs)(e.p,{children:["Kmdo will error if you try to use them. Give it a try with\n",(0,i.jsx)(e.code,{children:"kmdo pub r --snapshot --clean"}),". ",(0,i.jsx)(e.a,{href:"#user-content-fnref-fail","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(c,{...n})}):c(n)}},8453:(n,e,o)=>{o.d(e,{R:()=>s,x:()=>r});var t=o(6540);const i={},a=t.createContext(i);function s(n){const e=t.useContext(a);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:s(n.components),t.createElement(a.Provider,{value:e},n.children)}}}]);