"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[4037],{7166:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"tutorial/pub/builds/zig","title":"Zig","description":"You can now build Zig binaries using zig build and Kmdo!","source":"@site/docs/tutorial/pub/builds/zig.mdx","sourceDirName":"tutorial/pub/builds","slug":"/tutorial/pub/builds/zig","permalink":"/docs/tutorial/pub/builds/zig","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Verifiable Builds","permalink":"/docs/tutorial/pub/builds/verifiable_builds"},"next":{"title":"Dist folder","permalink":"/docs/tutorial/pub/general/dist"}}');var o=t(4848),s=t(8453);const a={},r="Zig",l={},d=[{value:"Environment setup",id:"environment-setup",level:3},{value:"Caveats",id:"caveats",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",sup:"sup",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"zig",children:"Zig"})}),"\n",(0,o.jsxs)(n.p,{children:["You can now build Zig binaries using ",(0,o.jsx)(n.code,{children:"zig build"})," and Kmdo!"]}),"\n",(0,o.jsxs)(n.p,{children:["Simply set the ",(0,o.jsx)(n.code,{children:"builder"})," to ",(0,o.jsx)(n.code,{children:"zig"}),", for instance:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",metastring:'title=".kmdopkg.yaml"',children:'builds:\n  # You can have multiple builds defined as a yaml list\n  - #\n    # ID of the build.\n    #\n    # Default: Project directory name.\n    id: "my-build"\n\n    # Use zig.\n    builder: zig\n\n    # Binary name.\n    # Can be a path (e.g. `bin/app`) to wrap the binary in a directory.\n    #\n    # Default: Project directory name.\n    binary: program\n\n    # List of targets to be built, in Zig\'s format.\n    # Default: [ "x86_64-linux", "x86_64-macos", "x86_64-windows", "aarch64-linux", "aarch64-macos" ]\n    targets:\n      - aarch64-macos\n      - x86_64-linux-gnu\n\n    # Path to project\'s (sub)directory containing the code.\n    # This is the working directory for the Zig build command(s).\n    #\n    # Default: \'.\'.\n    dir: my-app\n\n    # Set a specific zig binary to use when building.\n    # It is safe to ignore this option in most cases.\n    #\n    # Default: "zig".\n    # Templates: allowed.\n    tool: "zig-nightly"\n\n    # Sets the command to run to build.\n    # Can be useful if you want to build tests, for example,\n    # in which case you can set this to "test".\n    # It is safe to ignore this option in most cases.\n    #\n    # Default: build.\n    command: not-build\n\n    # Custom flags.\n    #\n    # Templates: allowed.\n    # Default: "-Doptimize=ReleaseSafe".\n    flags:\n      - --release\n\n    # Custom environment variables to be set during the builds.\n    # Invalid environment variables will be ignored.\n    #\n    # Default: os.Environ() ++ env config section.\n    # Templates: allowed.\n    env:\n      - FOO=bar\n\n    # Hooks can be used to customize the final binary,\n    # for example, to run generators.\n    #\n    # Templates: allowed.\n    hooks:\n      pre: ./foo.sh\n      post: ./script.sh {{ .Path }}\n\n    # If true, skip the build.\n    # Useful for library projects.\n    skip: false\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Some options are not supported yet",(0,o.jsx)(n.sup,{children:(0,o.jsx)(n.a,{href:"#user-content-fn-fail",id:"user-content-fnref-fail","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),", but it should be usable at least for\nsimple projects already!"]}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsxs)(n.p,{children:["Learn more about ",(0,o.jsx)(n.a,{href:"/docs/tutorial/pub/builds/hooks",children:"build hooks"}),"."]})}),"\n",(0,o.jsx)(n.h3,{id:"environment-setup",children:"Environment setup"}),"\n",(0,o.jsx)(n.p,{children:"Kmdo will not install Zig or any other dependencies on which your\nworkflow depends. Make sure to install them before running Kmdo."}),"\n",(0,o.jsx)(n.h2,{id:"caveats",children:"Caveats"}),"\n",(0,o.jsxs)(n.p,{children:["Kmdo will translate Zig's Os/Arch pair into a GOOS/GOARCH pair, so\ntemplates should work the same as before.\nThe original target name is available in templates as ",(0,o.jsx)(n.code,{children:".Target"}),", and so is the\nABI as ",(0,o.jsx)(n.code,{children:".Abi"}),"."]}),"\n","\n",(0,o.jsxs)(n.section,{"data-footnotes":!0,className:"footnotes",children:[(0,o.jsx)(n.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{id:"user-content-fn-fail",children:["\n",(0,o.jsxs)(n.p,{children:["Kmdo will error if you try to use them. Give it a try with\n",(0,o.jsx)(n.code,{children:"kmdo pub r --snapshot --clean"}),". ",(0,o.jsx)(n.a,{href:"#user-content-fnref-fail","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var i=t(6540);const o={},s=i.createContext(o);function a(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);