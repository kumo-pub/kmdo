"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[8129],{8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var a=n(6540);const i={},o=a.createContext(i);function s(e){const t=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(o.Provider,{value:t},e.children)}},8475:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"tutorial/pub/sbom","title":"Cataloging artifacts","description":"A Software Bill of Materials (SBOM) is a description of the components that make","source":"@site/docs/tutorial/pub/sbom.md","sourceDirName":"tutorial/pub","slug":"/tutorial/pub/sbom","permalink":"/kmdo/docs/tutorial/pub/sbom","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Report Sizes","permalink":"/kmdo/docs/tutorial/pub/reportsizes"},"next":{"title":"Signing archives, packages, checksums","permalink":"/kmdo/docs/tutorial/pub/sign/"}}');var i=n(4848),o=n(8453);const s={},r="Cataloging artifacts",l={},c=[{value:"Usage",id:"usage",level:2},{value:"Available variable names",id:"available-variable-names",level:3},{value:"Limitations",id:"limitations",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"cataloging-artifacts",children:"Cataloging artifacts"})}),"\n",(0,i.jsx)(t.p,{children:"A Software Bill of Materials (SBOM) is a description of the components that make\nup a software artifact."}),"\n",(0,i.jsx)(t.p,{children:"Kmdo can create one or more SBOMs for any artifacts generated by\nKmdo."}),"\n",(0,i.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(t.p,{children:"The artifact cataloging step can analyze one or more artifacts generated by\nKmdo and output one or more SBOM files into the dist directory."}),"\n",(0,i.jsxs)(t.p,{children:["The default is configured to create an SBOM for each archive produced with\n",(0,i.jsx)(t.a,{href:"https://github.com/anchore/syft",children:"Syft"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"To customize the artifact cataloging pipeline you can use the following options:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",metastring:'title=".kmdopkg.yaml"',children:'sboms:\n  - # ID of the sbom config, must be unique.\n    #\n    # Default: \'default\'.\n    id: foo\n\n    # List of names of the SBOM documents created at this step\n    # (relative to the dist dir).\n    #\n    # Each element configured is made available as variables. For example:\n    #   documents: ["foo", "bar"]\n    #\n    # would make the following variables that can be referenced as template keys:\n    #   document0: "foo"\n    #   document1: "bar"\n    #\n    # Note that multiple sbom values are only allowed if the value of\n    # "artifacts" is "any".\n    #\n    # Default:\n    #   When "binary":   ["{{ .Binary }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}.sbom.json"]\n    #   When "any":      []\n    #   Otherwise:       ["{{ .ArtifactName }}.sbom.json"]\n    # Templates: allowed.\n    documents:\n      - "${artifact}.spdx.json"\n\n    # Path to the SBOM generator command\n    #\n    # Note: the process CWD will be set to the same location as "dist"\n    #\n    # Default: \'syft\'.\n    cmd: syft\n\n    # Command line arguments for the command\n    #\n    # Default: ["$artifact", "--output", "spdx-json=$document", "--enrich", "all"].\n    # Templates: allowed.\n    args: ["$artifact", "--output", "cyclonedx-json=$document"]\n\n    # List of environment variables that will be passed to the SBOM command as\n    # well as the templates.\n    #\n    # Default: [ "SYFT_FILE_METADATA_CATALOGER_ENABLED=true" ].\n    env:\n      - FOO=bar\n      - HONK=honkhonk\n\n    # Which artifacts to catalog.\n    #\n    # Valid options are:\n    # - any:        let the SBOM tool decide which artifacts available in\n    #               the cwd should be cataloged\n    # - source:     source archive\n    # - package:    Linux packages (deb, rpm, apk, etc)\n    # - archive:    archives from archive pipe\n    # - binary:     binaries output from the build stage\n    #\n    # Default: \'archive\'.\n    artifacts: archive\n\n    # IDs of the artifacts to catalog.\n    #\n    # If `artifacts` is "source" or "any" then this fields has no effect.\n    ids:\n      - foo\n      - bar\n\n    # Whether this SBOM configuration is disabled.\n    #\n    # Default: \'true\'.\n    # Templates: allowed.\n    disable: true\n'})}),"\n",(0,i.jsx)(t.h3,{id:"available-variable-names",children:"Available variable names"}),"\n",(0,i.jsx)(t.p,{children:"These environment variables might be available in the fields that are accept\ntemplates:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"${artifact}"}),': the path to the artifact that will be cataloged (unless\n"artifacts" config item is "any")']}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"${artifactID}"}),': the ID of the artifact that will be cataloged (unless\n"artifacts" config item is "any")']}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"${document}"}),": the SBOM filename generated (corresponds to ",(0,i.jsx)(t.code,{children:"${document0}"}),' if\nthe "artifacts" config item is "any")']}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"${document#}"}),": the SBOM filenames generated, where ",(0,i.jsx)(t.code,{children:"#"}),' corresponds to the\nlist index under the "documents" config item (e.g. ',(0,i.jsx)(t.code,{children:"${document0}"}),")"]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"limitations",children:"Limitations"}),"\n",(0,i.jsx)(t.p,{children:"Container images generated by Kmdo are not available to be cataloged by\nthe SBOM tool."})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);