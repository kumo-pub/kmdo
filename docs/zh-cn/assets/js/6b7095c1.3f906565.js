"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2080],{6587:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"tutorial/pub/builds/upx","title":"UPX","description":"Having small binary sizes are important, and Go is known for generating rather","source":"@site/docs/tutorial/pub/builds/upx.mdx","sourceDirName":"tutorial/pub/builds","slug":"/tutorial/pub/builds/upx","permalink":"/zh-cn/docs/tutorial/pub/builds/upx","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Rust","permalink":"/zh-cn/docs/tutorial/pub/builds/rust"},"next":{"title":"UV","permalink":"/zh-cn/docs/tutorial/pub/builds/uv"}}');var o=t(4848),s=t(8453);const r={},a="UPX",l={},d=[];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"upx",children:"UPX"})}),"\n",(0,o.jsx)(n.p,{children:"Having small binary sizes are important, and Go is known for generating rather\nbig binaries."}),"\n",(0,o.jsxs)(n.p,{children:["Kmdo has had ",(0,o.jsx)(n.code,{children:"-s -w"})," as default ",(0,o.jsx)(n.code,{children:"ldflags"})," since the beginning, which help\nshaving off some bytes, but if you want to shave it even more, ",(0,o.jsx)(n.a,{href:"https://upx.github.io/",children:(0,o.jsx)(n.code,{children:"upx"})})," is\nthe ",(0,o.jsx)(n.em,{children:"de facto"})," tool for the job."]}),"\n",(0,o.jsxs)(n.p,{children:["Kmdo has been able to integrate with it via custom ",(0,o.jsx)(n.a,{href:"/zh-cn/docs/tutorial/pub/builds/hooks",children:"build hooks"}),",\nand now UPX has its own configuration section:"]}),"\n",(0,o.jsxs)(n.admonition,{title:'"Compatibility"',type:"warning",children:[(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"upx"})," does not support all platforms! Make sure to check\n",(0,o.jsx)(n.a,{href:"https://github.com/upx/upx/issues",children:"their issues"})," and to test your packed binaries."]}),(0,o.jsxs)(n.p,{children:["Namely, ",(0,o.jsx)(n.em,{children:"macOS Ventura"})," is not supported at the moment."]})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",metastring:'title=".kmdopkg.yaml"',children:"upx:\n  - # Whether to enable it or not.\n    #\n    # Templates: allowed.\n    enabled: true\n\n    # Filter by build ID.\n    ids: [build1, build2]\n\n    # Filter by GOOS.\n    goos: [linux, darwin]\n\n    # Filter by GOARCH.\n    goarch: [arm, amd64]\n\n    # Filter by GOARM.\n    goarm: [8]\n\n    # Filter by GOAMD64.\n    goamd64: [v1]\n\n    # Compress argument.\n    # Valid options are from '1' (faster) to '9' (better), and 'best'.\n    compress: best\n\n    # Whether to try LZMA (slower).\n    lzma: true\n\n    # Whether to try all methods and filters (slow).\n    brute: true\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["If ",(0,o.jsx)(n.code,{children:"upx"})," is not in ",(0,o.jsx)(n.code,{children:"$PATH"}),", Kmdo will automatically avoid running it."]})}),"\n",(0,o.jsxs)(n.p,{children:["Notice you can define multiple ",(0,o.jsx)(n.code,{children:"upx"})," definitions, filtering by various fields.\nYou can use that to have different compression options depending on the target\nOS, for instance - or even to run it only on a few selected platforms."]})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(6540);const o={},s=i.createContext(o);function r(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);