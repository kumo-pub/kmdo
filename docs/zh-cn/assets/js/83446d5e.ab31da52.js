"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[6316],{5628:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"tutorial/pub/quick-start","title":"Quick Start","description":"In this example we will build, archive and release a sample project.","source":"@site/docs/tutorial/pub/quick-start.md","sourceDirName":"tutorial/pub","slug":"/tutorial/pub/quick-start","permalink":"/kmdo/zh-cn/docs/tutorial/pub/quick-start","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Winget","permalink":"/kmdo/zh-cn/docs/tutorial/pub/publish/winget"},"next":{"title":"Report Sizes","permalink":"/kmdo/zh-cn/docs/tutorial/pub/reportsizes"}}');var r=i(4848),l=i(8453);const o={},c="Quick Start",a={},t=[{value:"Dry run",id:"dry-run",level:2},{value:"Verify dependencies",id:"verify-dependencies",level:3},{value:"Build-only Mode",id:"build-only-mode",level:3},{value:"Release Flags",id:"release-flags",level:3},{value:"More options",id:"more-options",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"quick-start",children:"Quick Start"})}),"\n",(0,r.jsx)(n.p,{children:"In this example we will build, archive and release a sample project."}),"\n",(0,r.jsxs)(n.p,{children:["Create a GitHub repository, clone and ",(0,r.jsx)(n.code,{children:"cd"})," into it, and let's get started!"]}),"\n",(0,r.jsx)(n.p,{children:'=== ":simple-go: Go"'}),"\n",(0,r.jsx)(n.p,{children:"Initialize your module with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"go mod init github.com/you/your-repo\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Then create a ",(0,r.jsx)(n.code,{children:"main.go"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",metastring:'title="main.go"',children:'package main\n\nfunc main() {\n  println("Ba dum, tss!")\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:'=== ":simple-rust: Rust"'}),"\n",(0,r.jsx)(n.p,{children:"Initialize your project with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"cargo init --bin\n"})}),"\n",(0,r.jsx)(n.p,{children:'=== ":simple-zig: Zig"'}),"\n",(0,r.jsx)(n.p,{children:"Initialize your project with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"zig init\n"})}),"\n",(0,r.jsx)(n.p,{children:'=== ":simple-bun: Bun"'}),"\n",(0,r.jsx)(n.p,{children:"Initialize your project with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"bun init\n"})}),"\n",(0,r.jsx)(n.p,{children:'=== ":simple-deno: Deno"'}),"\n",(0,r.jsx)(n.p,{children:"Initialize your project with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"deno init\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Run the ",(0,r.jsx)(n.a,{href:"/kmdo/zh-cn/docs/cmd/pub/pub_init",children:"init"})," command to create an example ",(0,r.jsx)(n.code,{children:".kmdopkg.yaml"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"kmdo pub init\n"})}),"\n",(0,r.jsxs)(n.p,{children:['Now, lets run a "local-only" release to see if it works using the ',(0,r.jsx)(n.a,{href:"/kmdo/zh-cn/docs/cmd/pub/pub_release",children:"release"})," command:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"kmdo pub release --snapshot --clean\n"})}),"\n",(0,r.jsxs)(n.p,{children:["At this point, you can ",(0,r.jsx)(n.a,{href:"/kmdo/zh-cn/docs/tutorial/pub/overview",children:"customize"})," the generated ",(0,r.jsx)(n.code,{children:".kmdopkg.yaml"})," or leave it as-is, it's up to you.\nIt is best practice to check ",(0,r.jsx)(n.code,{children:".kmdopkg.yaml"})," into the source control."]}),"\n",(0,r.jsxs)(n.p,{children:["You can verify your ",(0,r.jsx)(n.code,{children:".kmdopkg.yaml"})," is valid by running the ",(0,r.jsx)(n.a,{href:"/kmdo/zh-cn/docs/cmd/pub/pub_check",children:"check"})," command:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"kmdo pub check\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You can also use Kmdo to ",(0,r.jsx)(n.a,{href:"/kmdo/zh-cn/docs/cmd/pub/pub_build",children:"build"})," the binary only for a given target, which is useful for local development:"]}),"\n",(0,r.jsx)(n.p,{children:'=== ":simple-go: Go"'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'GOOS="linux" \\\nGOARCH="arm64" \\\n  kmdo pub build --single-target\n'})}),"\n",(0,r.jsxs)(n.p,{children:["It will default to your current ",(0,r.jsx)(n.code,{children:"GOOS"}),"/",(0,r.jsx)(n.code,{children:"GOARCH"}),"."]}),"\n",(0,r.jsx)(n.p,{children:'=== ":simple-rust: Rust"'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'TARGET="aarch64-unknown-linux-gnu" \\\n  kmdo pub build --single-target\n'})}),"\n",(0,r.jsx)(n.p,{children:'=== ":simple-zig: Zig"'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'TARGET="aarch64-linux" \\\n  kmdo pub build --single-target\n'})}),"\n",(0,r.jsx)(n.p,{children:'=== ":simple-bun: Bun"'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'TARGET="bun-linux-arm64" \\\n  kmdo pub build --single-target\n'})}),"\n",(0,r.jsx)(n.p,{children:'=== ":simple-deno: Deno"'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'TARGET="aarch64-unknown-linux-gnu" \\\n  kmdo pub build --single-target\n'})}),"\n",(0,r.jsxs)(n.p,{children:["To release to GitHub, you'll need to export a ",(0,r.jsx)(n.code,{children:"GITHUB_TOKEN"})," environment variable, which should contain a valid GitHub token with the ",(0,r.jsx)(n.code,{children:"repo"})," scope.\nIt will be used to deploy releases to your GitHub repository.\nYou can create a new GitHub token ",(0,r.jsx)(n.a,{href:"https://github.com/settings/tokens/new?scopes=repo,write:packages",children:"here"}),"."]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["The minimum permissions the ",(0,r.jsx)(n.code,{children:"GITHUB_TOKEN"})," should have to run this are ",(0,r.jsx)(n.code,{children:"write:packages"})]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'export GITHUB_TOKEN="YOUR_GH_TOKEN"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Kmdo will use the latest ",(0,r.jsx)(n.a,{href:"https://git-scm.com/book/en/v2/Git-Basics-Tagging",children:"Git tag"})," of your repository."]}),"\n",(0,r.jsx)(n.p,{children:"Now, create a tag and push it to GitHub:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'git tag -a v0.1.0 -m "First release"\ngit push origin v0.1.0\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Check if your tag adheres to ",(0,r.jsx)(n.a,{href:"/kmdo/zh-cn/docs/cookbook/semver",children:"semantic versioning"}),"."]})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["If you don't want to create a tag yet, you can also run Kmdo without\npublishing based on the latest commit by using the ",(0,r.jsx)(n.code,{children:"--snapshot"})," flag:"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"kmdo pub release --snapshot\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now you can run Kmdo at the root of your repository:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"kmdo pub release\n"})}),"\n",(0,r.jsx)(n.p,{children:"That's all it takes!"}),"\n",(0,r.jsxs)(n.p,{children:["Kmdo will build the binaries for your app for the default targets for the\nbuild mechanism being used.\nYou can customize that by changing the ",(0,r.jsx)(n.code,{children:"builds"})," section.\nCheck the ",(0,r.jsx)(n.a,{href:"/kmdo/zh-cn/docs/tutorial/pub/builds/",children:"documentation"})," for more information."]}),"\n",(0,r.jsxs)(n.p,{children:["After building the binaries, Kmdo will create an archive for each target into a separate file.\nYou can customize several things by changing the ",(0,r.jsx)(n.code,{children:"archives"})," section, including releasing only the binaries and not creating archives at all.\nCheck the ",(0,r.jsx)(n.a,{href:"/kmdo/zh-cn/docs/tutorial/pub/archive/",children:"documentation"})," for more information."]}),"\n",(0,r.jsx)(n.p,{children:"Finally, it will create a release on GitHub with all the artifacts."}),"\n",(0,r.jsx)(n.p,{children:"Check your GitHub project's releases page!"}),"\n",(0,r.jsx)(n.h2,{id:"dry-run",children:"Dry run"}),"\n",(0,r.jsx)(n.p,{children:'If you want to test everything before doing a release "for real", you can\nuse the following techniques.'}),"\n",(0,r.jsx)(n.h3,{id:"verify-dependencies",children:"Verify dependencies"}),"\n",(0,r.jsx)(n.p,{children:"You can check if you have every tool needed for the current configuration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"kmdo pub healthcheck\n"})}),"\n",(0,r.jsx)(n.h3,{id:"build-only-mode",children:"Build-only Mode"}),"\n",(0,r.jsx)(n.p,{children:"Build command will build the project:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"kmdo pub build\n"})}),"\n",(0,r.jsx)(n.p,{children:"This can be useful as part of CI pipelines to verify the project builds\nwithout errors for all build targets."}),"\n",(0,r.jsx)(n.h3,{id:"release-flags",children:"Release Flags"}),"\n",(0,r.jsxs)(n.p,{children:["Use the ",(0,r.jsx)(n.code,{children:"--skip=publish"})," flag to skip publishing:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"kmdo pub release --skip=publish\n"})}),"\n",(0,r.jsx)(n.h3,{id:"more-options",children:"More options"}),"\n",(0,r.jsxs)(n.p,{children:["You can check the command line usage help ",(0,r.jsx)(n.a,{href:"/kmdo/zh-cn/docs/cmd/pub/",children:"here"})," or with:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"kmdo pub --help\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>c});var s=i(6540);const r={},l=s.createContext(r);function o(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);