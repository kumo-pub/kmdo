"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[4615],{6387:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>u,frontMatter:()=>d,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"shooting/no-main","title":"Build does not contain a main function","description":"This usually happens if you\'re trying to build a library or if you didn\'t setup","source":"@site/docs/shooting/no-main.md","sourceDirName":"shooting","slug":"/shooting/no-main","permalink":"/zh-cn/docs/shooting/no-main","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"shootingSidebar","previous":{"title":"Changelog has only the latest commit","permalink":"/zh-cn/docs/shooting/no-history"},"next":{"title":"GitHub release upload errors","permalink":"/zh-cn/docs/shooting/release-upload"}}');var r=o(4848),t=o(8453);const d={},s="Build does not contain a main function",a={},c=[{value:"If you are building a library",id:"if-you-are-building-a-library",level:2},{value:"If your <code>main.go</code> is not in the root directory",id:"if-your-maingo-is-not-in-the-root-directory",level:2},{value:"If you ran kmdo outside the root of the project",id:"if-you-ran-kmdo-outside-the-root-of-the-project",level:2},{value:"If you are building in <code>plugin</code>, <code>c-shared</code> or <code>c-archive</code> build modes",id:"if-you-are-building-in-plugin-c-shared-or-c-archive-build-modes",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"build-does-not-contain-a-main-function",children:"Build does not contain a main function"})}),"\n",(0,r.jsxs)(n.p,{children:["This usually happens if you're trying to build a library or if you didn't setup\nthe ",(0,r.jsx)(n.code,{children:"builds.main"})," section in your ",(0,r.jsx)(n.code,{children:".kmdopkg.yaml"})," and your ",(0,r.jsx)(n.code,{children:"main.go"})," is not\nin the root directory."]}),"\n",(0,r.jsx)(n.p,{children:"Here's an example error:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"   \u2a2f build failed after 0.11s error=build for foo does not contain a main function\n\nLearn more at https://pub.kumose.cc/errors/no-main\n"})}),"\n",(0,r.jsx)(n.h2,{id:"if-you-are-building-a-library",children:"If you are building a library"}),"\n",(0,r.jsx)(n.p,{children:"Add something like this to your config:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title=".kmdopkg.yaml"',children:"builds:\n  - skip: true\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"if-your-maingo-is-not-in-the-root-directory",children:["If your ",(0,r.jsx)(n.code,{children:"main.go"})," is not in the root directory"]}),"\n",(0,r.jsx)(n.p,{children:"Add something like this to your config:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title=".kmdopkg.yaml"',children:"builds:\n  - main: ./path/to/your/main/pkg/\n"})}),"\n",(0,r.jsxs)(n.p,{children:["For more info, check the ",(0,r.jsx)(n.a,{href:"/zh-cn/docs/tutorial/pub/builds/go",children:"builds documentation"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"if-you-ran-kmdo-outside-the-root-of-the-project",children:"If you ran kmdo outside the root of the project"}),"\n",(0,r.jsx)(n.p,{children:"Run kmdo in the root of the project."}),"\n",(0,r.jsxs)(n.h2,{id:"if-you-are-building-in-plugin-c-shared-or-c-archive-build-modes",children:["If you are building in ",(0,r.jsx)(n.code,{children:"plugin"}),", ",(0,r.jsx)(n.code,{children:"c-shared"})," or ",(0,r.jsx)(n.code,{children:"c-archive"})," build modes"]}),"\n",(0,r.jsxs)(n.p,{children:["You can set ",(0,r.jsx)(n.code,{children:"no_main_check"})," to ",(0,r.jsx)(n.code,{children:"true"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title=".kmdopkg.yaml"',children:"builds:\n  - main: ./path/...\n    buildmode: plugin\n    no_main_check: true\n"})}),"\n",(0,r.jsxs)(n.p,{children:["For more info, check the ",(0,r.jsx)(n.a,{href:"/zh-cn/docs/tutorial/pub/builds/go",children:"builds documentation"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>d,x:()=>s});var i=o(6540);const r={},t=i.createContext(r);function d(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);