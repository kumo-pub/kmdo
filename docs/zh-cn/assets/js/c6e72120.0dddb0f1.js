"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[5977],{3175:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"tutorial/pub/archive/makeself","title":"Self-Extracting Archives","description":"Kmdo can create self-extracting archives using Makeself.","source":"@site/docs/tutorial/pub/archive/makeself.mdx","sourceDirName":"tutorial/pub/archive","slug":"/tutorial/pub/archive/makeself","permalink":"/kmdo/zh-cn/docs/tutorial/pub/archive/makeself","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Docker Images with Ko","permalink":"/kmdo/zh-cn/docs/tutorial/pub/archive/ko"},"next":{"title":"Linux packages (via nFPM)","permalink":"/kmdo/zh-cn/docs/tutorial/pub/archive/nfpm"}}');var i=a(4848),s=a(8453);const r={},o="Self-Extracting Archives",l={},c=[{value:"Configuration",id:"configuration",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"self-extracting-archives",children:"Self-Extracting Archives"})}),"\n",(0,i.jsxs)(n.p,{children:["Kmdo can create self-extracting archives using ",(0,i.jsx)(n.a,{href:"https://makeself.io/",children:"Makeself"}),".\nThese files are executables that self-extract themselves, and might run the\nunderlying binary, install it, or do other operations."]}),"\n",(0,i.jsx)(n.p,{children:"This is particularly useful for distributing software that needs to be easily\ninstallable without requiring users to manually extract archives.\nTypically this supports Linux, MacOS and any other platform that Makeself runs\non."}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["This feature requires the ",(0,i.jsx)(n.code,{children:"makeself"})," command to be available in\nyour system ",(0,i.jsx)(n.code,{children:"$PATH"}),".\nYou can install it from your system package manager or from\n",(0,i.jsx)(n.a,{href:"https://makeself.io/",children:"the Makeself project"}),"."]})}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Here is a commented ",(0,i.jsx)(n.code,{children:"makeselfs"})," section with all fields specified:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title=".kmdopkg.yaml"',children:'makeselfs:\n  - #\n    # ID of this Makeself package.\n    #\n    # Default: \'default\'.\n    id: my-installer\n\n    # IDs of the builds which should be packaged in this Makeself archive.\n    #\n    # Default: empty (include all).\n    ids:\n      - my-binary\n\n    # Which OSes to create the packages for.\n    #\n    # Default: [linux darwin].\n    goos:\n      - linux\n      - darwin\n\n    # Which architectures to create the packages for.\n    #\n    # Default: empty (all architectures).\n    goarch:\n      - arm64\n      - amd64\n\n    # Name of the package.\n    #\n    # Default: \'{{ .ProjectName }}\'.\n    # Templates: allowed.\n    name: my-package\n\n    # Description of your package.\n    #\n    # Default: inferred from global metadata.\n    # Templates: allowed.\n    description: foo bar\n\n    # Keywords for your package.\n    keywords:\n      - release\n      - makeself\n\n    # Your app\'s homepage.\n    #\n    # Default: inferred from global metadata.\n    homepage: "https://example.com/"\n\n    # Your software license.\n    #\n    # Default: inferred from global metadata.\n    license: MIT\n\n    # The maintainer/author of the package.\n    #\n    # Default: inferred from global metadata.\n    maintainer: "Foo Bar <foo at bar dot com>"\n\n    # Archive file name template.\n    #\n    # Mind that the filename must contain the desired extension as well,\n    # which typically is `.run`.\n    #\n    # Default: \'{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}{{ with .Arm }}v{{ . }}{{ end }}{{ with .Mips }}_{{ . }}{{ end }}{{ if not (eq .Amd64 "v1") }}{{ .Amd64 }}{{ end }}.run\'\n    # Templates: allowed.\n    filename: "{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}.run"\n\n    # Compression format to use.\n    #\n    # Valid options: gzip, bzip2, xz, lzo, compress, none\n    # Default: gzip (Makeself\'s default)\n    # Templates: allowed.\n    # Note: none translates to makeself\'s --nocomp flag\n    compression: "gzip"\n\n    # Path to setup script file.\n    # This script will be copied into the archive.\n    # It is executed when the user runs the Makeself package.\n    # Templates: allowed.\n    script: install.sh\n\n    # Additional command-line arguments to pass to Makeself.\n    #\n    # Refer to https://makeself.io for more information.\n    #\n    # Templates: allowed.\n    extra_args:\n      - "--notemp"\n      - "--needroot"\n      - "--keep"\n      - "--copy"\n\n    # Additional files/globs you want to add to the Makeself package.\n    # These files will be available to the install script.\n    #\n    # Templates: allowed.\n    files:\n      - LICENSE.txt\n      - README_{{.Os}}.md\n      - CHANGELOG.md\n      - configs/*\n      - scripts/*.sh\n      # a more complete example\n      - src: "*.md"\n        dst: docs\n\n        # Strip parent directories when adding files to the archive.\n        strip_parent: true\n\n\n    # Disable this Makeself package.\n    # Templates: allowed.\n    disable: "{{ .Env.SKIP_MAKESELF }}"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Please refer to the ",(0,i.jsx)(n.a,{href:"https://makeself.io/",children:"Makeself documentation"})," for more information."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"The install script has access to all files included in the package,\nso you can reference documentation, configuration files,\nor other assets in your installation logic."})}),"\n",(0,i.jsx)(n.admonition,{title:'"Root Privileges"',type:"warning",children:(0,i.jsxs)(n.p,{children:["When using ",(0,i.jsx)(n.code,{children:"--needroot"})," in ",(0,i.jsx)(n.code,{children:"extra_args"}),", the Makeself installer will\nautomatically prompt for root privileges when executed.\nThis allows your install script to assume root access without using ",(0,i.jsx)(n.code,{children:"sudo"}),"\ncommands, making the script simpler and more reliable."]})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"Makeself packages are platform-specific (typically Linux and macos) and\ncreate executable files.\nMake sure your target users can execute them on their systems."})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>r,x:()=>o});var t=a(6540);const i={},s=t.createContext(i);function r(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);