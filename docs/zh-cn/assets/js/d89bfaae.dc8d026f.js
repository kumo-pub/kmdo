"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[1315],{4457:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>a,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"tutorial/pub/builds/bun","title":"Bun","description":"You can now build TypeScript binaries using bun build --compile and Kmdo!","source":"@site/docs/tutorial/pub/builds/bun.mdx","sourceDirName":"tutorial/pub/builds","slug":"/tutorial/pub/builds/bun","permalink":"/zh-cn/docs/tutorial/pub/builds/bun","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Buiding","permalink":"/zh-cn/docs/tutorial/pub/builds/"},"next":{"title":"Deno","permalink":"/zh-cn/docs/tutorial/pub/builds/deno"}}');var i=t(4848),s=t(8453);const a={},r="Bun",l={},d=[{value:"Environment setup",id:"environment-setup",level:3},{value:"Caveats",id:"caveats",level:2}];function u(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",sup:"sup",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"bun",children:"Bun"})}),"\n",(0,i.jsxs)(e.p,{children:["You can now build TypeScript binaries using ",(0,i.jsx)(e.code,{children:"bun build --compile"})," and Kmdo!"]}),"\n",(0,i.jsxs)(e.p,{children:["Simply set the ",(0,i.jsx)(e.code,{children:"builder"})," to ",(0,i.jsx)(e.code,{children:"bun"}),", for instance:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",metastring:'title=".kmdopkg.yaml"',children:'builds:\n  # You can have multiple builds defined as a yaml list\n  - #\n    # ID of the build.\n    #\n    # Default: Project directory name.\n    id: "my-build"\n\n    # Use bun.\n    builder: bun\n\n    # Binary name.\n    # Can be a path (e.g. `bin/app`) to wrap the binary in a directory.\n    #\n    # Default: Project directory name.\n    binary: program\n\n    # List of targets to be built, in Bun\'s format.\n    #\n    # See: https://bun.sh/docs/bundler/executables\n    # The `bun-` prefix is added automatically.\n    # Default: [ "linux-x64-modern", "linux-arm64", "darwin-x64", "darwin-arm64", "windows-x64-modern" ]\n    targets:\n      - linux-x64-modern\n      - darwin-arm64\n\n    # Path to project\'s (sub)directory containing the code.\n    # This is the working directory for the `bun build` command(s).\n    #\n    # Default: \'.\'.\n    dir: my-app\n\n    # Main entry point.\n    #\n    # Default: extracted from package.json or `.`.\n    main: "file.ts"\n\n    # Set a specific bun binary to use when building.\n    # It is safe to ignore this option in most cases.\n    #\n    # Default: "bun".\n    # Templates: allowed.\n    tool: "bun-nightly"\n\n    # Sets the command to run to build.\n    #\n    # Default: build.\n    command: not-build\n\n    # Custom flags.\n    #\n    # Templates: allowed.\n    # Default: ["--compile"].\n    flags:\n      - --minify\n\n    # Custom environment variables to be set during the builds.\n    # Invalid environment variables will be ignored.\n    #\n    # Default: os.Environ() ++ env config section.\n    # Templates: allowed.\n    env:\n      - FOO=bar\n\n    # Hooks can be used to customize the final binary,\n    # for example, to run generators.\n    #\n    # Templates: allowed.\n    hooks:\n      pre: ./foo.sh\n      post: ./script.sh {{ .Path }}\n\n    # If true, skip the build.\n    # Useful for library projects.\n    skip: false\n'})}),"\n",(0,i.jsxs)(e.p,{children:["Some options are not supported yet",(0,i.jsx)(e.sup,{children:(0,i.jsx)(e.a,{href:"#user-content-fn-fail",id:"user-content-fnref-fail","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),", but it should be usable for\nmost projects already!"]}),"\n",(0,i.jsx)(e.admonition,{type:"warning",children:(0,i.jsxs)(e.p,{children:["Learn more about ",(0,i.jsx)(e.a,{href:"/zh-cn/docs/tutorial/pub/builds/hooks",children:"build hooks"}),"."]})}),"\n",(0,i.jsx)(e.h3,{id:"environment-setup",children:"Environment setup"}),"\n",(0,i.jsx)(e.p,{children:"Kmdo will not install Bun or any other dependencies on which your\nworkflow depends. Make sure to install them before running Kmdo."}),"\n",(0,i.jsx)(e.h2,{id:"caveats",children:"Caveats"}),"\n",(0,i.jsxs)(e.p,{children:["Kmdo will translate Bun's Os/Arch pair into a GOOS/GOARCH pair, so\ntemplates should work the same as before.\nThe original target name is available in templates as ",(0,i.jsx)(e.code,{children:".Target"}),", and so is the\nModern/Baseline bit as ",(0,i.jsx)(e.code,{children:".Type"}),"."]}),"\n","\n",(0,i.jsxs)(e.section,{"data-footnotes":!0,className:"footnotes",children:[(0,i.jsx)(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{id:"user-content-fn-fail",children:["\n",(0,i.jsxs)(e.p,{children:["Kmdo will error if you try to use them. Give it a try with\n",(0,i.jsx)(e.code,{children:"kmdo pub r --snapshot --clean"}),". ",(0,i.jsx)(e.a,{href:"#user-content-fnref-fail","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function c(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(u,{...n})}):u(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>r});var o=t(6540);const i={},s=o.createContext(i);function a(n){const e=o.useContext(s);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:a(n.components),o.createElement(s.Provider,{value:e},n.children)}}}]);