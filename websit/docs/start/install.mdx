---
slug: /quick-start/install
---
# kmdo 安装 

kmdo 是基于 Go 开发的自动化发布工程工具，支持 `kminstaller` 交互式安装与本地索引安装两种方式，适配 `Linux（amd64/arm64/arm-v7/i386）、macOS（amd64/arm64）`等 `Unix` 类系统，安装过程无需编译，秒级完成部署，以下是详细操作指南：

## 一、方式1：kminstaller 交互式安装（推荐，零配置上手） #interactive-install

通过官方专属安装工具 kminstaller 实现全自动化部署，自动适配系统架构、选择最优版本、配置环境变量，适合绝大多数用户快速使用。

### 1. 前置依赖检查

kmdo 安装仅依赖 Python 3.8+ 环境（用于运行 kminstaller），先验证本地 Python 版本：

```shell
python3 --version

# 输出示例：Python 3.10.12（版本 ≥3.8 即可，若未安装需先执行：sudo apt install python3-pip -y）
```

### 2. 安装 kminstaller 工具

```shell
pip install kminstaller --user
# 说明：--user 参数表示用户级安装，无需 root 权限，避免污染系统环境
```
### 3. 解决 "kminstaller: command not found" 问题

若执行 `kminstaller --help` 提示命令不存在，是因为 Python 用户级二进制目录未加载，执行以下命令：
`source ~/.bashrc`

 验证：执行 `kminstaller --help` 能看到帮助信息即配置成功

### 4. 启动 kmdo 交互式安装

```shell
  kminstaller install kmdo
```

### 5. 跟随引导完成安装（全程可视化，无需手动干预）

#### 步骤1：自动下载官方版本索引

工具会自动从官方源下载 kmdo 版本索引文件，包含所有可用版本信息：
🔗 No local index provided, downloading official index...
✅ Official index downloaded to temporary directory

#### 步骤2：选择 kmdo 版本

终端会列出所有可用版本（含版本号、发布状态、发布日期），用 **箭头键** 上下导航，**回车** 确认选择：
```shell
📋 Select kmdo Version
Choose a version for kmdo
  v0.6.20 (released) - Published: 2025-11-21
  v0.6.19 (released) - Published: 2025-11-20
  v0.6.18 (beta) - Published: 2025-11-19
> v0.6.17 (released) - Published: 2025-11-18
# 说明：released 为稳定版，beta 为测试版，推荐选择最新稳定版
```

#### 步骤3：系统架构自动匹配

工具会检测当前系统的 OS 和架构，自动匹配最优的二进制安装包：

```shell
💻 Detected System: linux | Arch: amd64
🎯 Matched asset (score: 3): kmdo-0.6.20-linux-x86_64.tar.gz
# 支持架构同义词适配：amd64 ↔ x86_64、arm64 ↔ aarch64、arm-v7 ↔ armv7l、386 ↔ i386
```

#### 步骤4：自动完成下载、解压与部署

工具会执行以下操作，全程无需手动干预：
1. 下载匹配的二进制包至临时目录（如 /tmp/kmdo_install_xxx/）
2. 解压 .tar.gz 包至临时提取目录
3. 复制核心程序、配置文件至默认安装路径
4. 为 kmdo 二进制文件添加可执行权限（0o755）
5. 自动执行 kmdo env init -f 完成环境初始化

#### 步骤5：安装成功提示

安装完成后，终端会输出以下信息：
🎉 kmdo installation completed successfully!
   Install directory: /home/jeff/.kmdo
   Binary path: /home/jeff/.kmdo/kmdo
   Environment variable has been added to ~/.bashrc
💡 Tip: Run "source ~/.bashrc" to take effect immediately

## 二、方式2：本地指定索引安装（适合离线/内部环境）

若所在环境无法访问外网（离线环境），或需要使用内部定制的版本索引，可通过本地索引文件安装，步骤如下：

### 1. 准备本地版本索引文件

从官方渠道或内部仓库获取 kmdo_release_index.json（版本索引文件），保存至本地任意目录，示例：

```shell
# 保存路径示例：~/downloads/kmdo_release_index.json
# 索引文件包含所有可用版本的信息（版本号、发布日期、二进制包下载链接等）
```

### 2. 执行本地索引安装命令

```shell
kminstaller install kmdo --index ~/downloads/kmdo_release_index.json
# 说明：--index 参数后紧跟本地索引文件的绝对路径或相对路径
```

### 3. 完成安装
- 工具会读取本地索引文件，列出所有可用版本
- 后续步骤与交互式安装一致（选择版本 → 自动下载/部署 → 环境初始化）
- 环境变量会自动写入 ~/.bashrc，无需手动配置

## 三、验证安装

安装完成后，必须执行以下命令验证是否成功部署：

### 1. 加载环境变量

```shell
source ~/.bashrc
# 说明：环境变量已自动写入 ~/.bashrc，执行此命令即可立即生效，无需重启终端
```

### 2. 验证 kmdo 版本

```shell
kmdo --version
# 成功输出示例（与选择的版本一致）：
   _   _ _        _______      ____     
  | | /   \      /   __  \    / __ \    
  | |/ /|  \    /   |   \ \  / /  \ \   
  |   / |   \  / /| |    | DO (    ) )  
  | |\ \| |\ \/ / | |__ / /  \_\__/ /   
  |_| \_|_| \__/  |_____/     \____/    
                                        
kmdo: Release engineering, simplified.
https://docs.kumose.cc/kmdo

GitVersion:    0.6.20
GitCommit:     332bab9f94309c71e61703d480d72bf63e9832e6
GitTreeState:  false
BuildDate:     2025-11-21T01:09:18Z
BuiltBy:       kumose
GoVersion:     go1.25.4
Compiler:      gc
ModuleSum:     h1:h10Rr8SAkpgb77dVeb7tUHbRXbgbtz+QaJBWDNfwbpk=
Platform:      linux/amd64
```
### 3. 验证命令行功能

```shell
kmdo --help
# 成功输出：kmdo 所有命令的帮助信息（说明命令行功能正常）
```

### 常见验证问题处理

- 问题1：提示 "kmdo: command not found"
  解决：重新执行 source ~/.bashrc，确保环境变量加载成功
- 问题2：版本号与选择的不一致
  解决：卸载后重新安装（参考「卸载方式」），选择正确版本
- 问题3：执行 kmdo 命令报错 "permission denied"
  解决：手动添加可执行权限：chmod +x ~/.kmdo/kmdo

## 四、安装详情说明

### 1. 默认安装路径（用户级部署，无 root 依赖）
- 核心程序：~/.kmdo/kmdo（主可执行文件）
- 配置目录：~/.kmdo/config/（存储默认配置、基线数据）
- 缓存目录：~/.kmdo/cache/（存储依赖缓存、临时文件）
- 安装日志：~/.kmdo/installer.log（记录安装过程详情，便于排查问题）

### 2. 环境变量配置说明


`kminstaller 会自动在` `~/.bashrc` 中添加以下配置：
`export PATH="$HOME/.kmdo:$PATH"`

作用：将 kmdo 安装目录添加到系统 PATH，实现全局调用
若使用 Zsh 终端，需手动将上述配置添加到 ~/.zshrc，然后执行 source ~/.zshrc

### 3. 支持的系统与架构
- 操作系统：Linux（Ubuntu/Debian/CentOS 等）、macOS（10.15+）
- 架构支持：amd64（x86_64）、arm64（aarch64）、arm-v7（armv7l）、i386（386）

## 五、卸载方式

kmdo 采用隔离式部署，删除安装目录即可完全卸载，无系统残留：

### 1. 基础卸载（删除核心文件）
```shell
rm -rf ~/.kmdo
```
说明：此命令会删除所有 kmdo 相关文件（程序、配置、缓存、日志）

### 2. 清理环境变量（可选）
编辑 `~/.bashrc` 文件，删除自动添加的 PATH 配置行：

```shell
# 1. 打开 .bashrc 文件
nano ~/.bashrc
# 2. 找到并删除以下行


export PATH="$HOME/.kmdo/bin/:$PATH"

# 3. 保存退出：Ctrl+O → 回车 → Ctrl+X
# 4. 生效配置：source ~/.bashrc
```

### 3. 验证卸载

```shell
kmdo --version
# 提示 "kmdo: command not found" 即卸载成功
```

## 六、常见问题排查

### 1. 下载超时/失败

- 现象：安装过程中提示 "Download failed (Request error): HTTPSConnectionPool read timed out"
- 原因：网络不稳定，或 GitHub 访问受限
- 解决：
  1. 检查网络连接，重试安装命令
  2. 配置代理：`export HTTPS_PROXY=https://代理地址:端口`，再执行安装
  3. 切换至方式2（本地索引安装），手动下载二进制包后部署

### 2. 解压失败

- 现象：提示 "Extraction failed: tarfile.ReadError: invalid header"
- 原因：二进制包下载不完整或损坏
- 解决：
  1. 重新执行安装命令，工具会自动重新下载
  2. 手动下载对应版本的二进制包，使用方式2（--local 参数）安装

### 3. 初始化失败

- 现象：提示 "kmdo init -f failed: ..."
- 原因：环境初始化过程中遇到权限问题或配置冲突
- 解决：
  1. 手动执行初始化命令：kmdo env init -f
  2. 查看错误日志：cat ~/.kmdo/installer.log，定位具体问题

### 4. 版本索引加载失败

- 现象：提示 "Local index file not found" 或 "Invalid index file format"
- 原因：本地索引文件路径错误或文件损坏
- 解决：
  1. 检查索引文件路径是否正确（绝对路径优先）
  2. 重新下载索引文件，确保文件格式为 valid JSON

## 七、进阶使用（可选）

### 1. 自定义安装路径

若需将 kmdo 安装到自定义目录（如 /opt/kmdo），需修改 kminstaller 配置（适合高级用户）：

```text
# 1. 找到 kminstaller 安装目录（执行 pip show kminstaller | grep Location）
# 2. 编辑 kminstaller/component/kmdo/installer.py 文件
# 3. 修改 install_dir 默认值：install_dir = "/opt/kmdo"（需 root 权限）
# 4. 执行安装命令：sudo kminstaller install kmdo
```

### 2. 离线安装（无网络环境）


1. 在外网环境下载：
   - kminstaller 安装包：`pip download kminstaller --no-deps -d ~/downloads/`
   - kmdo 版本索引文件：kmdo_release_index.json
   - 目标版本二进制包：kmdo-xxx.tar.gz
2. 拷贝至离线环境，执行：

```shell
   # 安装 kminstaller
   pip install ~/downloads/kminstaller-xxx.whl --user
   # 安装 kmdo（指定本地包）
   kminstaller install kmdo --index ~/downloads/kmdo_release_index.json --local ~/downloads/kmdo-xxx.tar.gz
```